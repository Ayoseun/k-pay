!function(){"use strict";document.querySelectorAll(".dropdown-header").forEach((e=>{e.addEventListener("click",(function(){const e=this.parentElement;document.querySelectorAll(".dropdown").forEach((t=>{t!==e&&(t.classList.remove("open"),t.querySelector(".dropdown-checkbox").checked=!1)})),e.classList.toggle("open"),e.querySelector(".dropdown-checkbox").checked=e.classList.contains("open")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("card-number"),t=document.getElementById("cardholder-name"),n=document.getElementById("cvc"),o=document.getElementById("card-logo"),s=document.getElementById("expiry-date"),c=document.getElementById("pin-container"),a=document.getElementById("card-details"),l=document.getElementById("summary-container"),i=document.getElementById("success-container"),r=document.getElementById("middle-section"),d=document.getElementById("bottom-section"),u=document.getElementById("summary-buttons-confirm"),m=document.getElementById("summary-buttons-go-back"),y=document.getElementById("pin-back"),p=document.getElementById("pin-continue");s.addEventListener("input",(e=>{let t=e.target.value.replace(/\D/g,"");if(t.length>=2){let e=t.slice(0,2);parseInt(e,10)>12&&(e="12"),t=e+"/"+t.slice(2,4)}e.target.value=t.slice(0,5)})),e.addEventListener("input",(function(){const t=e.value.replace(/\s+/g,"");t.startsWith("4")?o.src="./assets/visa.svg":t.startsWith("5")?o.src="./assets/mastercard.svg":t.startsWith("6")?o.src="./assets/discover.svg":t.startsWith("3")?o.src="./assets/maestro.svg":o.src="./assets/visa.svg"})),n.addEventListener("input",(()=>{n.value.length>3&&(n.value=n.value.slice(0,3))})),fetch("https://restcountries.com/v3.1/all").then((e=>e.json())).then((e=>{console.log("Countries fetched:",e.length);const t=document.getElementById("country");t.innerHTML='<option value="">Select Country</option>',e.sort(((e,t)=>e.name.common.localeCompare(t.name.common))),e.forEach((e=>{const n=document.createElement("option");n.value=e.name.common,n.textContent=e.name.common,t.appendChild(n)}))})).catch((e=>console.error("Error fetching countries:",e))),document.getElementById("country").addEventListener("change",(e=>{const t=e.target.value;if(console.log("Selected country:",t),!t)return console.log("No country selected, clearing state and city dropdowns"),document.getElementById("state").innerHTML='<option value="">Select State</option>',void(document.getElementById("city").innerHTML='<option value="">Select City</option>');fetch("https://countriesnow.space/api/v0.1/countries/states",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({country:t})}).then((e=>(console.log("State API response status:",e.status),e.json()))).then((e=>{console.log("State data received:",e);const t=document.getElementById("state");t.innerHTML='<option value="">Select State</option>',e.data&&e.data.states?(console.log("Number of states:",e.data.states.length),e.data.states.forEach((e=>{const n=document.createElement("option");n.value=e.name,n.textContent=e.name,t.appendChild(n)}))):console.log("No states found in the response"),document.getElementById("city").innerHTML='<option value="">Select City</option>'})).catch((e=>{console.error("Error fetching states:",e),alert("Error fetching states. Please check the console for details.")}))})),document.getElementById("state").addEventListener("change",(e=>{const t=document.getElementById("country").value,n=e.target.value;if(console.log("Selected country for city fetch:",t),console.log("Selected state for city fetch:",n),!n)return console.log("No state selected, clearing city dropdown"),void(document.getElementById("city").innerHTML='<option value="">Select City</option>');fetch("https://countriesnow.space/api/v0.1/countries/state/cities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({country:t,state:n})}).then((e=>(console.log("City API response status:",e.status),e.json()))).then((e=>{console.log("City data received:",e);const t=document.getElementById("city");t.innerHTML='<option value="">Select City</option>',e.data?(console.log("Number of cities:",e.data.length),e.data.forEach((e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)}))):console.log("No cities found in the response")})).catch((e=>{console.error("Error fetching cities:",e),alert("Error fetching cities. Please check the console for details.")}))})),u.addEventListener("click",(e=>{i.style.display="flex",r.style.display="none",d.style.display="none"})),m.addEventListener("click",(e=>{l.style.display="none",a.style.display="block"})),p.addEventListener("click",(e=>{c.style.display="none",l.style.display="block"})),y.addEventListener("click",(e=>{c.style.display="none",a.style.display="block"})),window.submitForm=async function(){if(!/^(0[1-9]|1[0-2])\/(0[1-9]|[1-9][0-9])$/.test(s.value))return void alert("Invalid expiry date format. Use MM/YY.");const[o,i]=s.value.split("/"),r=parseInt(o,10),d=parseInt(i,10),u=new Date,m=u.getFullYear()%100,y=u.getMonth()+1;if(d<m||d===m&&r<y)return void alert("The expiry date must be later than the current date.");const p=await fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>e.ip)).catch((()=>"0.0.0.0")),h={amount:"200",currency:"USD",paymentOption:{card:{cardNumber:e.value.replace(/\s+/g,""),cardHolderName:t.value,expirationMonth:o,expirationYear:`20${i}`,CVV:n.value,threeD:{methodNotificationUrl:"<methodNotificationURL>"}}},deviceDetails:{ipAddress:p}};console.log(h),fetch("https://dumm.onrender.com/initiate-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then((e=>e.json())).then((e=>{console.log("Payment initiated successfully",e),"SUCCESS"===e.status&&(null!==e.paymentOption.card.threeD.version?(a.style.display="none",c.style.display="flex"):(a.style.display="none",l.style.display="block"))})).catch((e=>{console.error("Error:",e)}))}}))}();
//# sourceMappingURL=orokii.bundle.js.map
